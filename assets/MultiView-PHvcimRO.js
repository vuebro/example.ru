import{defineComponent as B,computed as g,ref as w,watch as C,onUnmounted as O,openBlock as v,createElementBlock as k,Fragment as j,renderList as q,normalizeClass as z,createBlock as D,resolveDynamicComponent as F}from"vue";import{b as L,y as P,M as R}from"./vues3-cHjRsqaz.js";import{a as T,b as U}from"./vueuse-xTpkTi1I.js";import{b as X}from"./vue-router-OTT23yck.js";import{$ as l,p as _,m as Y,r as A,t as y,a as G,s as H,b as I,c as J,_ as K}from"./index-XPJNei7y.js";import{v as S}from"./uuid-C_lTrkZC.js";import"./ajv-keywords-DJWKfJAw.js";import"./fast-deep-equal-C148XJoK.js";import"./fast-uri-J6I7s6O_.js";import"./vue-BQnMDgJF.js";import"./unocss-CZHMAnU0.js";import"./ofetch-DKyuTA_G.js";import"./destr-Cx7WjB9q.js";import"./ufo-LxZlbPj-.js";import"./iconify-VXx5U5CW.js";import"./debug-CgoTrq1J.js";import"./ms-CzQ2E3wO.js";import"./magic-string-D9CdRQHO.js";import"./jridgewell-9KHfGwW6.js";import"./unhead-CdZEm2eo.js";import"./packrup-BqxTmGwz.js";import"./hookable-B7_1qfUG.js";import"./vue3-sfc-loader-DdTOzAd6.js";const N=B({__name:"MultiView",setup(V,{expose:h}){h();const s=g(()=>new Map(l.value.map(({id:e=S()})=>[e,!1]))),r=w(new Map(s.value)),u=w([]),c=X(),t=[],a=g(()=>{const[[e,o]=[]]=_;return _.clear(),e&&o&&_.set(e,o),Object.fromEntries(l.value.map(i=>[i.id,Y(i)]))}),m=()=>{t.forEach(e=>{e()}),t.length=0},b=()=>{var e,o;if(!G.value&&y.value&&l.value.length){const{scrollX:i,scrollY:p}=window,[n]=l.value,[d]=P.value;if(d&&n){const{$children:[{id:x}={}]=[]}=d,E=!Math.floor(i)&&!Math.floor(p)&&n.id===x?d.id:((e=[...s.value.entries()].find(([,f])=>f))==null?void 0:e[0])??((o=[...r.value.entries()].find(([,f])=>f))==null?void 0:o[0])??n.id;H.value=!1,c.push({name:E}).catch(R)}}},$=({id:e})=>a.value[e];C(u,e=>{m(),setTimeout(()=>{e.forEach(o=>{const{stop:i}=T(o,([{isIntersecting:p,target:{id:n}={}}={}]=[])=>{r.value=new Map(s.value),n&&p!==void 0&&s.value.set(n,p)},{threshold:I});t.push(i)})})},{deep:L}),U(window,{behavior:J,onStop:b}),O(m);const M={intersecting:s,$intersecting:r,refs:u,router:c,stops:t,templates:a,clearStops:m,onStop:b,template:$,get v4(){return S},get $siblings(){return l},get resolve(){return A},get that(){return y}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),Q=["id","role"];function W(V,h,s,r,u,c){return v(!0),k(j,null,q(r.$siblings,t=>{var a;return v(),k("div",{id:t.id??r.v4(),key:t.id??r.v4(),ref_for:!0,ref:"refs",class:z(t.class),role:t.id===((a=r.that)==null?void 0:a.id)?"main":"section","un-cloak":""},[(v(),D(F(r.template(t)),{id:t.id,onVnodeMounted:m=>r.resolve(t)},null,8,["id","onVnodeMounted"]))],10,Q)}),128)}const ke=K(N,[["render",W],["__file","MultiView.vue"]]);export{ke as default};
